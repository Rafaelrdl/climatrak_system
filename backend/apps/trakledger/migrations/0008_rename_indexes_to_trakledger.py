# Generated by Django 5.0.1 on 2026-01-07 23:34

from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):
    dependencies = [
        ("assets", "0010_remove_asset_type_choices"),
        ("cmms", "0011_add_part_usage_source"),
        ("trakledger", "0007_rename_finance_to_trakledger"),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.RemoveConstraint(
            model_name="budgetenvelope",
            name="trakledger_envelope_unique_plan_cc_cat",
        ),
        migrations.RemoveConstraint(
            model_name="budgetmonth",
            name="trakledger_budgetmonth_unique_env_month",
        ),
        migrations.RemoveConstraint(
            model_name="budgetplan",
            name="trakledger_budgetplan_unique_code",
        ),
        migrations.RemoveConstraint(
            model_name="costcenter",
            name="trakledger_costcenter_unique_code",
        ),
        migrations.RemoveConstraint(
            model_name="costtransaction",
            name="finance_costtx_unique_idempotency",
        ),
        migrations.RemoveConstraint(
            model_name="energyreading",
            name="trakledger_ereading_unique_asset_date",
        ),
        migrations.RemoveConstraint(
            model_name="risksnapshot",
            name="trakledger_risksnapshot_unique_asset_date",
        ),
        migrations.RenameIndex(
            model_name="commitment",
            new_name="trakledger_commit_cc_idx",
            old_name="finance_commit_cc_idx",
        ),
        migrations.RenameIndex(
            model_name="commitment",
            new_name="trakledger_commit_month_idx",
            old_name="finance_commit_month_idx",
        ),
        migrations.RenameIndex(
            model_name="commitment",
            new_name="trakledger_commit_status_idx",
            old_name="finance_commit_status_idx",
        ),
        migrations.RenameIndex(
            model_name="commitment",
            new_name="trakledger_commit_cat_idx",
            old_name="finance_commit_cat_idx",
        ),
        migrations.RenameIndex(
            model_name="commitment",
            new_name="trakledger_commit_wo_idx",
            old_name="finance_commit_wo_idx",
        ),
        migrations.RenameIndex(
            model_name="commitment",
            new_name="trakledger_commit_summary_idx",
            old_name="finance_commit_summary_idx",
        ),
        migrations.RenameIndex(
            model_name="costtransaction",
            new_name="trakledger_ctx_idemp_idx",
            old_name="finance_ctx_idemp_idx",
        ),
        migrations.RenameIndex(
            model_name="costtransaction",
            new_name="trakledger_ctx_type_idx",
            old_name="finance_ctx_type_idx",
        ),
        migrations.RenameIndex(
            model_name="costtransaction",
            new_name="trakledger_ctx_cat_idx",
            old_name="finance_ctx_cat_idx",
        ),
        migrations.RenameIndex(
            model_name="costtransaction",
            new_name="trakledger_ctx_occurred_idx",
            old_name="finance_ctx_occurred_idx",
        ),
        migrations.RenameIndex(
            model_name="costtransaction",
            new_name="trakledger_ctx_cc_idx",
            old_name="finance_ctx_cc_idx",
        ),
        migrations.RenameIndex(
            model_name="costtransaction",
            new_name="trakledger_ctx_wo_idx",
            old_name="finance_ctx_wo_idx",
        ),
        migrations.RenameIndex(
            model_name="costtransaction",
            new_name="trakledger_ctx_asset_idx",
            old_name="finance_ctx_asset_idx",
        ),
        migrations.RenameIndex(
            model_name="costtransaction",
            new_name="trakledger_ctx_locked_idx",
            old_name="finance_ctx_locked_idx",
        ),
        migrations.RenameIndex(
            model_name="costtransaction",
            new_name="trakledger_ctx_summary_idx",
            old_name="finance_ctx_summary_idx",
        ),
        migrations.RenameIndex(
            model_name="ledgeradjustment",
            new_name="trakledger_adj_orig_tx_idx",
            old_name="finance_adj_orig_tx_idx",
        ),
        migrations.RenameIndex(
            model_name="ledgeradjustment",
            new_name="trakledger_adj_type_idx",
            old_name="finance_adj_type_idx",
        ),
        migrations.RenameIndex(
            model_name="ledgeradjustment",
            new_name="trakledger_adj_created_idx",
            old_name="finance_adj_created_idx",
        ),
        migrations.RenameIndex(
            model_name="ledgeradjustment",
            new_name="trakledger_adj_approved_idx",
            old_name="finance_adj_approved_idx",
        ),
        migrations.RenameIndex(
            model_name="savingsevent",
            new_name="tl_savings_cc_idx",
            old_name="finance_savings_cc_idx",
        ),
        migrations.RenameIndex(
            model_name="savingsevent",
            new_name="tl_savings_type_idx",
            old_name="finance_savings_type_idx",
        ),
        migrations.RenameIndex(
            model_name="savingsevent",
            new_name="tl_savings_occurred_idx",
            old_name="finance_savings_occurred_idx",
        ),
        migrations.RenameIndex(
            model_name="savingsevent",
            new_name="tl_savings_asset_idx",
            old_name="finance_savings_asset_idx",
        ),
        migrations.RenameIndex(
            model_name="savingsevent",
            new_name="tl_savings_wo_idx",
            old_name="finance_savings_wo_idx",
        ),
        migrations.RenameIndex(
            model_name="savingsevent",
            new_name="tl_savings_summary_idx",
            old_name="finance_savings_summary_idx",
        ),
        migrations.AddConstraint(
            model_name="budgetenvelope",
            constraint=models.UniqueConstraint(
                fields=("budget_plan", "cost_center", "category"),
                name="tl_env_uniq_plan_cc_cat",
            ),
        ),
        migrations.AddConstraint(
            model_name="budgetmonth",
            constraint=models.UniqueConstraint(
                fields=("envelope", "month"), name="tl_bm_uniq_env_month"
            ),
        ),
        migrations.AddConstraint(
            model_name="budgetplan",
            constraint=models.UniqueConstraint(
                fields=("code",), name="tl_bp_unique_code"
            ),
        ),
        migrations.AddConstraint(
            model_name="costcenter",
            constraint=models.UniqueConstraint(
                fields=("code",), name="tl_cc_unique_code"
            ),
        ),
        migrations.AddConstraint(
            model_name="costtransaction",
            constraint=models.UniqueConstraint(
                condition=models.Q(("idempotency_key__isnull", False)),
                fields=("idempotency_key",),
                name="tl_ctx_uniq_idempotency",
            ),
        ),
        migrations.AddConstraint(
            model_name="energyreading",
            constraint=models.UniqueConstraint(
                fields=("asset", "reading_date"), name="tl_eread_uniq_asset_date"
            ),
        ),
        migrations.AddConstraint(
            model_name="risksnapshot",
            constraint=models.UniqueConstraint(
                fields=("asset", "snapshot_date"), name="tl_risk_uniq_asset_date"
            ),
        ),
    ]
